{% extends "base.html" %}
{% block title %}Subir documento - Gestión de Flotas{% endblock %}
{% block content %}
<h1 class="h3 mb-4">Subir documento</h1>
{% if not vehicles %}
<div class="alert alert-warning">No hay vehículos. <a href="{{ url_for('web.vehicle_create') }}">Crea uno primero</a>.</div>
{% else %}
<div class="card" style="max-width: 500px;">
    <div class="card-body">
        <form method="post" enctype="multipart/form-data">
            <div class="mb-3">
                <label class="form-label">Vehículo <span class="text-danger">*</span></label>
                <select name="vehicle_id" class="form-select" required>
                    <option value="">Seleccionar...</option>
                    {% for v in vehicles %}
                    <option value="{{ v.id }}">{{ v.plate }}{% if v.alias %} ({{ v.alias }}){% endif %}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label">Archivo (jpg, png, pdf) <span class="text-danger">*</span></label>
                <input type="file" name="file" class="form-control" accept=".jpg,.jpeg,.png,.pdf" required>
                <small class="text-muted">Máx. 10 MB. Se procesará con IA para extraer datos.</small>
            </div>
            <button type="submit" class="btn btn-primary">
                <i class="bi bi-upload me-1"></i> Subir y procesar
            </button>
            <a href="{{ url_for('web.document_list') }}" class="btn btn-secondary">Cancelar</a>
        </form>
    </div>
</div>
{% endif %}
{% endblock %}
